"use strict";(self["webpackChunk_0202shangpinhui"]=self["webpackChunk_0202shangpinhui"]||[]).push([[875],{9875:function(s,t,e){e.r(t),e.d(t,{default:function(){return y}});var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"detail"},[t("TypeNav"),t("section",{staticClass:"con"},[s.info.categoryView?t("div",{staticClass:"conPoin"},s._l(3,(function(e){return t("span",{key:e},[s._v(" "+s._s(s.info.categoryView[`category${e}Name`])+" ")])})),0):s._e(),t("div",{staticClass:"mainCon"},[t("div",{staticClass:"previewWrap"},[s.info.skuInfo.skuDefaultImg?t("Zoom",{attrs:{imgUrl:s.info.skuInfo.skuDefaultImg}}):s._e(),s.info.skuInfo.skuImageList?t("ImageList",{attrs:{list:s.info.skuInfo.skuImageList}}):s._e()],1),s.info.skuInfo?t("div",{staticClass:"InfoWrap"},[t("div",{staticClass:"goodsDetail"},[t("h3",{staticClass:"InfoName"},[s._v(s._s(s.info.skuInfo.skuName))]),t("p",{staticClass:"news"},[s._v(s._s(s.info.skuInfo.skuDesc))]),t("div",{staticClass:"priceArea"},[t("div",{staticClass:"priceArea1"},[t("div",{staticClass:"title"},[s._v(" 价      格 ")]),t("div",{staticClass:"price"},[t("i",[s._v("¥")]),t("em",[s._v(s._s(s.info.price))])])])])]),t("div",{staticClass:"choose"},[t("div",{staticClass:"chooseArea"},[t("div",{staticClass:"choosed"}),s._l(s.info.spuSaleAttrList,(function(e){return t("dl",{key:e.id},[t("dt",{staticClass:"title"},[s._v(" 选择 "+s._s(e.saleAttrName)+" ")]),s._l(e.spuSaleAttrValueList,(function(i){return t("dd",{key:i.id,class:{active:1*i.isChecked},on:{click:function(t){return s.changeAttr(e.spuSaleAttrValueList,i.id)}}},[s._v(" "+s._s(i.saleAttrValueName)+" ")])}))],2)}))],2),t("div",{staticClass:"cartWrap"},[t("div",{staticClass:"controls"},[t("input",{staticClass:"itxt",attrs:{autocomplete:"off"},domProps:{value:s.goodsNum},on:{change:function(t){return s.changeGoodsNum("input",t)}}}),t("a",{staticClass:"plus",attrs:{href:"javascript:"},on:{click:function(t){return s.changeGoodsNum("increment")}}},[s._v("+")]),t("a",{staticClass:"mins",attrs:{href:"javascript:"},on:{click:function(t){return s.changeGoodsNum("decrement")}}},[s._v("-")])]),t("div",{staticClass:"add"},[t("a",{attrs:{href:"javascript:"},on:{click:s.addCart}},[s._v("加入购物车")])])])])]):s._e()])])],1)},a=[],o=(e(7658),e(5895)),r=function(){var s=this,t=s._self._c;return t("div",{staticClass:"swiper-container"},[t("div",{staticClass:"swiper-wrapper"},s._l(s.list,(function(e){return t("div",{key:e.id,staticClass:"swiper-slide"},[t("img",{attrs:{src:e.imgUrl},on:{click:function(t){return s.$bus.$emit("send-imgurl",e.imgUrl)}}})])})),0),t("div",{staticClass:"swiper-button-next"}),t("div",{staticClass:"swiper-button-prev"})])},n=[],l=e(781),c={name:"ImageList",props:["list"],mounted(){new l["default"](".swiper-container",{slidesPerView:5,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}},u=c,d=e(1001),f=(0,d.Z)(u,r,n,!1,null,"99330478",null),m=f.exports,g=function(){var s=this,t=s._self._c;return t("div",{staticClass:"spec-preview"},[t("img",{attrs:{src:s.url||s.imgUrl}}),t("div",{staticClass:"event",on:{mousemove:s.move}}),t("div",{staticClass:"big"},[t("img",{ref:"bigImg",attrs:{src:s.url||s.imgUrl}})]),t("div",{ref:"mask",staticClass:"mask"})])},p=[],h={name:"Zoom",data(){return{url:""}},props:["imgUrl"],methods:{move(s){let t=s.offsetX,e=s.offsetY,{mask:i,bigImg:a}=this.$refs,o=t-i.offsetWidth/2,r=e-i.offsetHeight/2;o<0?o=0:o>i.offsetWidth&&(o=i.offsetWidth),r<0?r=0:r>i.offsetHeight&&(r=i.offsetHeight),i.style.left=o+"px",i.style.top=r+"px",a.style.left=-2*o+"px",a.style.top=-2*r+"px"},saveUrl(s){this.url=s}},mounted(){this.$bus.$on("send-imgurl",this.saveUrl)},beforeDestroy(){this.$bus.$off("send-imgurl")}},v=h,k=(0,d.Z)(v,g,p,!1,null,null,null),C=k.exports,_=e(8366),I={name:"Detail",data(){return{info:{skuInfo:{}},goodsNum:1}},components:{ImageList:m,Zoom:C},methods:{async getGoodsInfo(){const{id:s}=this.$route.params;let{code:t,data:e,message:i}=await(0,o.vC)(s);200===t?this.info=e:alert(`获取商品详情数据失败:${i}`)},changeAttr(s,t){s.forEach((s=>{s.id===t?s.isChecked="1":s.isChecked="0"}))},changeGoodsNum(s,t){switch(s){case"input":let{value:s}=t.target,e=_.Qz.test(s);e?(console.log("你输入的数量是合法的，我可以给你存入"),this.goodsNum=1*s):s>200?(console.log("你输入的数量超过了200，可以接受，我帮你重置为200"),this.goodsNum=t.target.value=200):(console.log("你输入的非常不合理，不可以原谅，我帮你重置为1"),this.goodsNum=t.target.value=1);break;case"increment":200===this.goodsNum?alert("最大的购买数量为200"):this.goodsNum+=1;break;case"decrement":1===this.goodsNum?alert("最小购买数量为1 ！"):this.goodsNum-=1;break}},async addCart(){const{id:s}=this.$route.params;let{code:t,message:e}=await(0,o.KW)(s,this.goodsNum);if(200===t){const{price:s,spuSaleAttrList:t}=this.info,{skuName:e,skuDefaultImg:i}=this.info.skuInfo,{goodsNum:a}=this,o=[];t.forEach((s=>{let t=s.spuSaleAttrValueList.find((s=>"1"===s.isChecked));o.push(t.saleAttrName+"："+t.saleAttrValueName)}));const r={skuName:e,skuDefaultImg:i,price:s,goodsNum:a,attrArr:o};console.log(r),this.$router.push({path:"/addcart_success",query:{buyInfo:r}}),sessionStorage.setItem("buyInfo",JSON.stringify(r)),this.$router.push("/addcart_success")}else alert(`商品添加购物车失败：${e}`)}},mounted(){this.getGoodsInfo("/addcart_success")}},N=I,w=(0,d.Z)(N,i,a,!1,null,"a6cc9198",null),y=w.exports}}]);
//# sourceMappingURL=875.63ffa3db.js.map