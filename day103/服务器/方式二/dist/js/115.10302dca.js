"use strict";(self["webpackChunk_0202shangpinhui"]=self["webpackChunk_0202shangpinhui"]||[]).push([[115],{1115:function(a,s,e){e.r(s),e.d(s,{default:function(){return g}});var t=function(){var a=this,s=a._self._c;return s("div",{staticClass:"outer"},[s("TypeNav"),s("div",{staticClass:"main"},[s("div",{staticClass:"py-container"},[s("div",{staticClass:"bread"},[a._m(0),s("ul",{staticClass:"fl sui-tag"},[s("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.categoryName,expression:"searchParams.categoryName"}],staticClass:"with-x"},[a._v(" 分类："+a._s(a.searchParams.categoryName)+" "),s("i",{on:{click:a.removeCategoryName}},[a._v("×")])]),s("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.keyword,expression:"searchParams.keyword"}],staticClass:"with-x"},[a._v(" 关键词："+a._s(a.searchParams.keyword)+" "),s("i",{on:{click:a.removeKeyword}},[a._v("×")])]),s("li",{directives:[{name:"show",rawName:"v-show",value:a.searchParams.trademark,expression:"searchParams.trademark"}],staticClass:"with-x"},[a._v(" 关键词："+a._s(a.searchParams.trademark.split(":")[1])+" "),s("i",{on:{click:a.removeTrademark}},[a._v("×")])]),a._l(a.searchParams.props,(function(e,t){return s("li",{key:t,staticClass:"with-x"},[a._v(" "+a._s(a.attrText(e))+" "),s("i",{on:{click:function(s){return a.removeProps(t)}}},[a._v("×")])])}))],2)]),a.searchInfo.total?s("SearchSelector",{attrs:{attrsList:a.searchInfo.attrsList,trademarkList:a.searchInfo.trademarkList,sendTrademark:a.saveTrademark},on:{"send-attrvalue":a.saveAttrValue}}):a._e(),s("div",{staticClass:"details clearfix"},[s("div",{staticClass:"sui-navbar"},[s("div",{staticClass:"navbar-inner filter"},[s("ul",{staticClass:"sui-nav"},[s("li",{class:{active:1===a.orderType},on:{click:function(s){return a.changeOrder(1)}}},[s("a",[s("span",[a._v("综合")]),s("i",{directives:[{name:"show",rawName:"v-show",value:1===a.orderType,expression:"orderType === 1"}],staticClass:"iconfont",class:a.iconText})])]),s("li",{class:{active:2===a.orderType},on:{click:function(s){return a.changeOrder(2)}}},[s("a",[s("span",[a._v("价格")]),s("i",{directives:[{name:"show",rawName:"v-show",value:2===a.orderType,expression:"orderType === 2"}],staticClass:"iconfont",class:a.iconText})])])])])]),s("div",{staticClass:"goods-list"},[s("ul",{staticClass:"yui3-g"},a._l(a.searchInfo.goodsList,(function(e){return s("li",{key:e.id,staticClass:"yui3-u-1-5"},[s("div",{staticClass:"list-wrap"},[s("div",{staticClass:"p-img"},[s("a",[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.defaultImg,expression:"goods.defaultImg"}],on:{click:function(s){return a.toDetail(e.id)}}})])]),s("div",{staticClass:"price"},[s("strong",[s("em",[a._v("¥")]),s("i",[a._v(a._s(e.price))])])]),s("div",{staticClass:"attr",on:{click:function(s){return a.toDetail(e.id)}}},[s("a",{domProps:{innerHTML:a._s(e.title)}})]),a._m(1,!0),a._m(2,!0)])])})),0)]),a.searchInfo.total?s("Pagination",{attrs:{total:a.searchInfo.total,pageSize:a.searchParams.pageSize,pageNo:a.searchParams.pageNo,continues:5,sendPageNo:a.savePageNo}}):a._e()],1),a.searchInfo.total?a._e():s("div",{staticClass:"empty"},[s("img",{attrs:{src:"https://static.360buyimg.com/devfe/error-new/1.0.0/css/i/error_06.png",alt:""}}),s("h2",[a._v("抱歉，搜索结果为空")])])],1)])],1)},r=[function(){var a=this,s=a._self._c;return s("ul",{staticClass:"fl sui-breadcrumb"},[s("li",[s("span",{attrs:{href:"#"}},[a._v("全部结果")])])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"commit"},[s("i",{staticClass:"command"},[a._v("已有"),s("span",[a._v("2000")]),a._v("人评价")])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"operate"},[s("a",{staticClass:"sui-btn btn-bordered btn-danger",attrs:{href:"success-cart.html",target:"_blank"}},[a._v("加入购物车")]),s("a",{staticClass:"sui-btn btn-bordered",attrs:{href:"javascript:void(0);"}},[a._v("收藏")])])}],i=(e(7658),function(){var a=this,s=a._self._c;return s("div",{staticClass:"clearfix selt"},[s("div",{staticClass:"type-wrap logo"},[s("div",{staticClass:"fl key brand"},[a._v("品牌")]),s("div",{staticClass:"value logos"},[s("ul",{staticClass:"logo-list"},a._l(a.trademarkList,(function(e){return s("li",{key:e.tmId,on:{click:function(s){return a.sendTrademark(e)}}},[a._v(" "+a._s(e.tmName)+" ")])})),0)])]),a._l(a.attrsList,(function(e){return s("div",{key:e.attrId,staticClass:"type-wrap"},[s("div",{staticClass:"fl key"},[a._v(a._s(e.attrName))]),s("div",{staticClass:"fl value"},[s("ul",{staticClass:"type-list"},a._l(e.attrValueList,(function(t,r){return s("li",{key:r},[s("a",{on:{click:function(s){return a.$emit("send-attrvalue",e,t)}}},[a._v(a._s(t))])])})),0)]),s("div",{staticClass:"fl ext"})])}))],2)}),c=[],o={name:"SearchSelector",props:["trademarkList","attrsList","sendTrademark"]},n=o,l=e(1001),d=(0,l.Z)(n,i,c,!1,null,"4963cc42",null),h=d.exports,m=e(5895),u={name:"Search",components:{SearchSelector:h},data(){return{searchParams:{category1Id:"",category2Id:"",category3Id:"",categoryName:"",keyword:"",props:[],trademark:"",order:"1:anc",pageNo:1,pageSize:5},searchInfo:{}}},computed:{orderType(){return 1*this.searchParams.order.split(":")[0]},iconText(){return"asc"===this.searchParams.order.split(":")[1]?"icon-up":"icon-down"}},methods:{async executeSearch(){let{code:a,data:s,message:e}=await(0,m.w1)(this.searchParams);200===a?this.searchInfo=s:alert(`搜索失败：${e}`)},removeCategoryName(){const{keyword:a}=this.$route.query;this.$router.push({path:"/search",query:{keyword:a}})},removeKeyword(){const{query:a}=this.$route;this.$router.push({path:"/search",query:{...a,keyword:void 0}}),this.$bus.$emit("clear-keyword")},saveTrademark(a){console.log("我是父组件，收到了子组件传递过来的品牌数据",a.tmId,a.tmName),this.searchParams.trademark=`${a.tmId}:${a.tmName}`,this.searchParams.pageNo=1},removeTrademark(){Object.assign(this.searchParams,{trademark:"",pageNo:1})},saveAttrValue(a,s){console.log("传送",a.attrName,s);const e=`${a.attrId}:${s}:${a.attrName}`,t=this.searchParams.props.includes(e);t||(this.searchParams.props.push(e),this.searchParams.pageNo=1)},attrText(a){return a.split(":")[2]+":"+a.split(":")[1]},removeProps(a){this.searchParams.props.splice(a,1),this.searchParams.pageNo=1},savePageNo(a){this.searchParams.pageNo=a},changeOrder(a){const[s,e]=this.searchParams.order.split(":");if(a===1*s){const a=s+":"+("asc"===e?"desc":"asc");this.searchParams.order=a}else{const s=a+":desc";this.searchParams.order=s}},toDetail(a){this.$router.push({name:"detail",params:{id:a}})}},watch:{$route:{immediate:!0,handler({query:a}){console.log(a),Object.assign(this.searchParams,{category1Id:"",category2Id:"",category3Id:"",categoryName:""},a),this.searchParams.pageNo=1,this.executeSearch()}},searchParams:{deep:!0,handler(){this.executeSearch()}}}},v=u,p=(0,l.Z)(v,t,r,!1,null,"b9a27182",null),g=p.exports}}]);
//# sourceMappingURL=115.10302dca.js.map