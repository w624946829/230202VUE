{"version":3,"file":"js/698.2ff52a20.js","mappings":"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","sources":["webpack://0202shangpinhui/./src/pages/ShopCart/index.vue","webpack://0202shangpinhui/src/pages/ShopCart/index.vue","webpack://0202shangpinhui/./src/pages/ShopCart/index.vue?86ac","webpack://0202shangpinhui/./src/pages/ShopCart/index.vue?fa5f"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.cartInfoList.length)?_c('div',{staticClass:\"cart\"},[_c('h4',[_vm._v(\"全部商品\")]),_c('div',{staticClass:\"cart-main\"},[_vm._m(0),_c('div',{staticClass:\"cart-body\"},_vm._l((_vm.cartInfoList),function(c){return _c('ul',{key:c.id,staticClass:\"cart-list\"},[_c('li',{staticClass:\"cart-list-con1\"},[_c('input',{attrs:{\"type\":\"checkbox\",\"name\":\"chk_list\"},domProps:{\"checked\":c.isChecked},on:{\"click\":function($event){$event.preventDefault();return _vm.checkOne(c, $event)}}})]),_c('li',{staticClass:\"cart-list-con2\"},[_c('img',{attrs:{\"src\":c.imgUrl}}),_c('div',{staticClass:\"item-msg\"},[_vm._v(_vm._s(c.skuName))])]),_c('li',{staticClass:\"cart-list-con4\"},[_c('span',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(c.cartPrice))])]),_c('li',{staticClass:\"cart-list-con5\"},[_c('a',{staticClass:\"mins\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.changeSkuNum('decrement', c)}}},[_vm._v(\"-\")]),_c('input',{staticClass:\"itxt\",attrs:{\"autocomplete\":\"off\",\"type\":\"text\"},domProps:{\"value\":c.skuNum},on:{\"change\":function($event){return _vm.changeSkuNum('input', c, $event)}}}),_c('a',{staticClass:\"plus\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.changeSkuNum('increment', c)}}},[_vm._v(\"+\")])]),_c('li',{staticClass:\"cart-list-con6\"},[_c('span',{staticClass:\"sum\"},[_vm._v(\"￥\"+_vm._s(c.skuNum * c.cartPrice))])]),_c('li',{staticClass:\"cart-list-con7\"},[_c('a',{staticClass:\"sindelet\",attrs:{\"href\":\"#none\"},on:{\"click\":function($event){return _vm.deleteOne(c.skuId)}}},[_vm._v(\"删除\")]),_c('br')])])}),0)]),_c('div',{staticClass:\"cart-tool\"},[_c('div',{staticClass:\"select-all\"},[_c('input',{staticClass:\"chooseAll\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.isAll},on:{\"click\":function($event){$event.preventDefault();return _vm.checkAll.apply(null, arguments)}}}),_c('span',[_vm._v(\"全选\")])]),_c('div',{staticClass:\"option\"},[_c('a',{attrs:{\"href\":\"#none\"},on:{\"click\":_vm.batchDelete}},[_vm._v(\"删除选中的商品\")])]),_c('div',{staticClass:\"money-box\"},[_c('div',{staticClass:\"chosed\"},[_vm._v(\" 已选择 \"),_c('span',[_vm._v(_vm._s(_vm.total))]),_vm._v(\"件商品 \")]),_c('div',{staticClass:\"sumprice\"},[_c('em',[_vm._v(\"总价（不含运费） ：\")]),_c('i',{staticClass:\"summoney\"},[_vm._v(_vm._s(_vm.totalPrice))])]),_c('div',{staticClass:\"sumbtn\"},[_c('router-link',{staticClass:\"sum-btn\",attrs:{\"to\":\"/trade\"}},[_vm._v(\"结算\")])],1)])])]):_vm._e(),(!_vm.cartInfoList.length)?_c('div',{staticClass:\"empty\"},[_c('img',{attrs:{\"src\":\"http://49.232.112.44/img/empty.751bed26.gif\",\"alt\":\"\"}}),_c('h2',[_vm._v(\"购物车空空如也\")])]):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"cart-th\"},[_c('div',{staticClass:\"cart-th1\"},[_vm._v(\"全部\")]),_c('div',{staticClass:\"cart-th2\"},[_vm._v(\"商品\")]),_c('div',{staticClass:\"cart-th3\"},[_vm._v(\"单价（元）\")]),_c('div',{staticClass:\"cart-th4\"},[_vm._v(\"数量\")]),_c('div',{staticClass:\"cart-th5\"},[_vm._v(\"小计（元）\")]),_c('div',{staticClass:\"cart-th6\"},[_vm._v(\"操作\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div class=\"cart\" v-if=\"cartInfoList.length\">\r\n            <h4>全部商品</h4>\r\n            <div class=\"cart-main\">\r\n                <div class=\"cart-th\">\r\n                    <div class=\"cart-th1\">全部</div>\r\n                    <div class=\"cart-th2\">商品</div>\r\n                    <div class=\"cart-th3\">单价（元）</div>\r\n                    <div class=\"cart-th4\">数量</div>\r\n                    <div class=\"cart-th5\">小计（元）</div>\r\n                    <div class=\"cart-th6\">操作</div>\r\n                </div>\r\n                <div class=\"cart-body\">\r\n                    <ul class=\"cart-list\" v-for=\"c in cartInfoList\" :key=\"c.id\">\r\n                        <li class=\"cart-list-con1\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                name=\"chk_list\"\r\n                                :checked=\"c.isChecked\"\r\n                                @click.prevent=\"checkOne(c, $event)\"\r\n                            />\r\n                        </li>\r\n                        <li class=\"cart-list-con2\">\r\n                            <img :src=\"c.imgUrl\" />\r\n                            <div class=\"item-msg\">{{ c.skuName }}</div>\r\n                        </li>\r\n                        <li class=\"cart-list-con4\">\r\n                            <span class=\"price\">￥{{ c.cartPrice }}</span>\r\n                        </li>\r\n                        <li class=\"cart-list-con5\">\r\n                            <a\r\n                                href=\"javascript:void(0)\"\r\n                                class=\"mins\"\r\n                                @click=\"changeSkuNum('decrement', c)\"\r\n                                >-</a\r\n                            >\r\n                            <input\r\n                                autocomplete=\"off\"\r\n                                type=\"text\"\r\n                                class=\"itxt\"\r\n                                :value=\"c.skuNum\"\r\n                                @change=\"changeSkuNum('input', c, $event)\"\r\n                            />\r\n                            <a\r\n                                href=\"javascript:void(0)\"\r\n                                class=\"plus\"\r\n                                @click=\"changeSkuNum('increment', c)\"\r\n                                >+</a\r\n                            >\r\n                        </li>\r\n                        <li class=\"cart-list-con6\">\r\n                            <span class=\"sum\"\r\n                                >￥{{ c.skuNum * c.cartPrice }}</span\r\n                            >\r\n                        </li>\r\n                        <li class=\"cart-list-con7\">\r\n                            <a\r\n                                href=\"#none\"\r\n                                class=\"sindelet\"\r\n                                @click=\"deleteOne(c.skuId)\"\r\n                                >删除</a\r\n                            >\r\n                            <br />\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <!-- 全选框 -->\r\n            <div class=\"cart-tool\">\r\n                <div class=\"select-all\">\r\n                    <input\r\n                        class=\"chooseAll\"\r\n                        type=\"checkbox\"\r\n                        :checked=\"isAll\"\r\n                        @click.prevent=\"checkAll\"\r\n                    />\r\n                    <span>全选</span>\r\n                </div>\r\n                <div class=\"option\">\r\n                    <a href=\"#none\" @click=\"batchDelete\">删除选中的商品</a>\r\n                </div>\r\n                <div class=\"money-box\">\r\n                    <div class=\"chosed\">\r\n                        已选择 <span>{{ total }}</span\r\n                        >件商品\r\n                    </div>\r\n                    <div class=\"sumprice\">\r\n                        <em>总价（不含运费） ：</em>\r\n                        <i class=\"summoney\">{{ totalPrice }}</i>\r\n                    </div>\r\n                    <div class=\"sumbtn\">\r\n                        <router-link class=\"sum-btn\" to=\"/trade\"\r\n                            >结算</router-link\r\n                        >\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- 数据为空显示 -->\r\n        <div class=\"empty\" v-if=\"!cartInfoList.length\">\r\n            <img src=\"http://49.232.112.44/img/empty.751bed26.gif\" alt=\"\" />\r\n            <h2>购物车空空如也</h2>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    reqCartList,\r\n    reqCheckOne,\r\n    reqCheckAll,\r\n    reqDeleteOne,\r\n    reqBatchDelete,\r\n    reqAddToCart,\r\n} from \"@/api\";\r\nimport { goodsNumReg } from \"@/utils/reg\";\r\n\r\nexport default {\r\n    name: \"ShopCart\",\r\n    data() {\r\n        return {\r\n            cartInfoList: [],\r\n        };\r\n    },\r\n    computed: {\r\n        // 计算是否全选\r\n        isAll() {\r\n            return (\r\n                this.cartInfoList.every((c) => c.isChecked) &&\r\n                this.cartInfoList.length\r\n            );\r\n        },\r\n        total() {\r\n            return this.cartInfoList.reduce(\r\n                (pre, item) => pre + (item.isChecked ? item.skuNum : 0),\r\n                0\r\n            );\r\n        },\r\n        totalPrice() {\r\n            return this.cartInfoList.reduce(\r\n                (pre, item) =>\r\n                    pre + (item.isChecked ? item.skuNum * item.skuPrice : 0),\r\n                0\r\n            );\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        // 用于获取购物车数据的方法\r\n        async getCartList() {\r\n            let { code, data, message } = await reqCartList();\r\n            if (code === 200) {\r\n                this.cartInfoList = data[0]?.cartInfoList || [];\r\n            } else {\r\n                alert(`获取购物车数据失败：${message}`);\r\n            }\r\n        },\r\n        // 勾选单个商品的回调\r\n        async checkOne(cartInfo, event) {\r\n            let { checked } = event.target;\r\n            checked = checked ? 1 : 0;\r\n            let { code, message } = await reqCheckOne(cartInfo.skuId, checked);\r\n            if (code === 200) {\r\n                cartInfo.isChecked = checked;\r\n            } else {\r\n                alert(\"勾选商品失败：\" + message);\r\n            }\r\n        },\r\n        // 勾选or取消勾选 单个商品的回调\r\n        async checkOne(cartInfo,event){\r\n        // 获取勾选状态（勾选 不勾选）\r\n        let {checked} = event.target\r\n        // 根据勾选与不勾选（true 或 false），赋一个符合服务器要求的值（1 或 0）\r\n        checked = checked ? 1 : 0\r\n\r\n        // 联系服务器勾选\r\n        let {code,message} = await reqCheckOne(cartInfo.skuId,checked)\r\n        // 判断业务逻辑\r\n        if(code === 200){\r\n          // 维护本地数据\r\n          cartInfo.isChecked = checked\r\n        }else {\r\n          alert(`勾选商品失败：${message}`)\r\n        }\r\n      },\r\n      // 勾选or取消勾选 所有商品的回调\r\n      async checkAll(event){\r\n        // 获取勾选状态（勾选 不勾选）\r\n        let {checked} = event.target\r\n        // 根据勾选与不勾选（true 或 false），赋一个符合服务器要求的值（1 或 0）\r\n        checked = checked ? 1 : 0\r\n        // 准备一个用于收集商品id的数据\r\n        const skuIdList = []\r\n        // 遍历所有商品，将id推入skuIdList\r\n        this.cartInfoList.forEach(c => skuIdList.push(c.skuId))\r\n        // 请求\r\n        let {code,message} = await reqCheckAll(skuIdList,checked)\r\n       \r\n        // 判断业务逻辑\r\n        if(code === 200){\r\n          // 维护本地数据\r\n          this.cartInfoList.forEach(c => c.isChecked = checked)\r\n        }else {\r\n          alert(`勾选商品失败：${message}`)\r\n        }\r\n      },\r\n        // 删除单个商品的回调\r\n        async deleteOne(skuId) {\r\n            if (confirm(\"确定要删除吗？\")) {\r\n                let { code, message } = await reqDeleteOne(skuId);\r\n                if (code === 200) {\r\n                    let index = this.cartInfoList.findIndex(\r\n                        (item) => item.skuId === skuId\r\n                    );\r\n                    this.cartInfoList.splice(index, 1);\r\n                }\r\n            } else {\r\n                alert(`删除商品失败：${message}`);\r\n            }\r\n        },\r\n        // 删除多个商品的回调\r\n        async batchDelete() {\r\n            if (confirm(\"确定要删除吗？\")) {\r\n                const idList = [];\r\n                this.cartInfoList.forEach((item) => {\r\n                    if (item.isChecked) {\r\n                        idList.push(item.isChecked);\r\n                    }\r\n                });\r\n                let { code, message } = await reqBatchDelete(idList);\r\n                if (code === 200) {\r\n                    this.cartInfoList = this.cartInfoList.filter(\r\n                        (item) => !item.isChecked\r\n                    );\r\n                } else {\r\n                    alert(`删除商品失败：${message}`);\r\n                }\r\n            }\r\n        },\r\n\r\n        // 修改商品数量的回调\r\n        async changeSkuNum(type, info, event) {\r\n            if (this.isLock) {\r\n                console.log(\"锁定中。。。。\");\r\n                return;\r\n            }\r\n            this.isLock = true;\r\n            //    获取需要修改的商品id\r\n            const { skuId, skuNum } = info;\r\n\r\n            switch (type) {\r\n                case \"increment\":\r\n                    if (skuNum === 200) {\r\n                        alert(\"最大购买数量为200\");\r\n                    } else {\r\n                        let { code, message } = await reqAddToCart(skuId, 1);\r\n                        if (code === 200) {\r\n                            info.skuNum += 1;\r\n                            info.isChecked = 1;\r\n                        } else {\r\n                            alert(`修改商品数量失败,${message}`);\r\n                        }\r\n                    }\r\n\r\n                    break;\r\n                case \"decrement\":\r\n                    if (skuNum === 1) {\r\n                        alert(\"最小购买数量为1\");\r\n                    } else {\r\n                        let { code, message } = await reqAddToCart(skuId, -1);\r\n                        if (code === 200) {\r\n                            info.skuNum -= 1;\r\n                            info.isChecked = 1;\r\n                        } else {\r\n                            alert(`修改商品数量失败,${message}`);\r\n                        }\r\n                    }\r\n                    break;\r\n                case \"input\":\r\n                    // 获取用户的输入\r\n                    const { value } = event.target;\r\n                    // 校验输入\r\n                    if (goodsNumReg.test(value)) {\r\n                        const disNum = value - skuNum;\r\n                        let { code, message } = await reqAddToCart(\r\n                            skuId,\r\n                            disNum\r\n                        );\r\n                        if (code === 200) {\r\n                            info.skuNum = value * 1;\r\n                            info.isChecked = 1;\r\n                        } else {\r\n                            //清空页面\r\n                            event.target.value = skuNum;\r\n                            alert(`修改商品数量失败：${message}`);\r\n                        }\r\n                    } else if (value > 200) {\r\n                        // 输入的不合法，但是可以原谅，原因是输入的太多\r\n                        const disNum = 200 - skuNum;\r\n                        // 发请求\r\n                        let { code, message } = await reqAddToCart(\r\n                            skuId,\r\n                            disNum\r\n                        );\r\n                        // 判断业务逻辑\r\n                        if (code === 200) {\r\n                            // 维护本地数据\r\n                            // 第一种更新\r\n                            // info.skuNum = event.target.value =  200;\r\n                            // 第二种 vue自带强制更新（效率可能存在问题）\r\n                            info.skuNum = 200;\r\n                            this.$forceUpdate();\r\n                        } else {\r\n                            //清空页面，避免页面残留\r\n                            event.target.value = skuNum;\r\n                            alert(`修改商品数量失败：${message}`);\r\n                        }\r\n                    } else {\r\n                        // 输入的不合法，且不可原谅\r\n                        event.target.value = skuNum;\r\n                    }\r\n                    break;\r\n            }\r\n            this.isLock = false;\r\n        },\r\n    },\r\n\r\n    mounted() {\r\n        this.getCartList();\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.cart {\r\n    width: 1200px;\r\n    margin: 0 auto;\r\n    h4 {\r\n        margin: 9px 0;\r\n        font-size: 14px;\r\n        line-height: 21px;\r\n    }\r\n    .cart-main {\r\n        .cart-th {\r\n            background: #f5f5f5;\r\n            border: 1px solid #ddd;\r\n            padding: 10px;\r\n            overflow: hidden;\r\n            & > div {\r\n                float: left;\r\n            }\r\n            .cart-th1 {\r\n                width: 25%;\r\n                input {\r\n                    vertical-align: middle;\r\n                }\r\n                span {\r\n                    vertical-align: middle;\r\n                }\r\n            }\r\n            .cart-th2 {\r\n                width: 25%;\r\n            }\r\n            .cart-th3,\r\n            .cart-th4,\r\n            .cart-th5,\r\n            .cart-th6 {\r\n                width: 12.5%;\r\n            }\r\n        }\r\n        .cart-body {\r\n            margin: 15px 0;\r\n            border: 1px solid #ddd;\r\n            .cart-list {\r\n                padding: 10px;\r\n                border-bottom: 1px solid #ddd;\r\n                overflow: hidden;\r\n                & > li {\r\n                    float: left;\r\n                }\r\n                .cart-list-con1 {\r\n                    width: 15%;\r\n                }\r\n                .cart-list-con2 {\r\n                    width: 35%;\r\n                    img {\r\n                        width: 82px;\r\n                        height: 82px;\r\n                        float: left;\r\n                    }\r\n                    .item-msg {\r\n                        float: left;\r\n                        width: 150px;\r\n                        margin: 0 10px;\r\n                        line-height: 18px;\r\n                    }\r\n                }\r\n                .cart-list-con4 {\r\n                    width: 10%;\r\n                }\r\n                .cart-list-con5 {\r\n                    width: 17%;\r\n                    .mins {\r\n                        border: 1px solid #ddd;\r\n                        border-right: 0;\r\n                        float: left;\r\n                        color: #666;\r\n                        width: 6px;\r\n                        text-align: center;\r\n                        padding: 8px;\r\n                        text-decoration: none;\r\n                    }\r\n                    input {\r\n                        border: 1px solid #ddd;\r\n                        width: 40px;\r\n                        height: 31px;\r\n                        float: left;\r\n                        text-align: center;\r\n                        font-size: 14px;\r\n                    }\r\n\r\n                    .plus {\r\n                        border: 1px solid #ddd;\r\n                        border-left: 0;\r\n                        float: left;\r\n                        color: #666;\r\n                        width: 6px;\r\n                        text-align: center;\r\n                        padding: 8px;\r\n                        text-decoration: none;\r\n                    }\r\n                }\r\n\r\n                .cart-list-con6 {\r\n                    width: 10%;\r\n\r\n                    .sum {\r\n                        font-size: 16px;\r\n                    }\r\n                }\r\n\r\n                .cart-list-con7 {\r\n                    width: 13%;\r\n\r\n                    a {\r\n                        color: #666;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .cart-tool {\r\n        overflow: hidden;\r\n        border: 1px solid #ddd;\r\n\r\n        .select-all {\r\n            padding: 10px;\r\n            overflow: hidden;\r\n            float: left;\r\n\r\n            span {\r\n                vertical-align: middle;\r\n            }\r\n\r\n            input {\r\n                vertical-align: middle;\r\n            }\r\n        }\r\n\r\n        .option {\r\n            padding: 10px;\r\n            overflow: hidden;\r\n            float: left;\r\n\r\n            a {\r\n                float: left;\r\n                padding: 0 10px;\r\n                color: #666;\r\n            }\r\n        }\r\n\r\n        .money-box {\r\n            float: right;\r\n\r\n            .chosed {\r\n                line-height: 26px;\r\n                float: left;\r\n                padding: 0 10px;\r\n            }\r\n\r\n            .sumprice {\r\n                width: 200px;\r\n                line-height: 22px;\r\n                float: left;\r\n                padding: 0 10px;\r\n\r\n                .summoney {\r\n                    color: #c81623;\r\n                    font-size: 16px;\r\n                }\r\n            }\r\n\r\n            .sumbtn {\r\n                float: right;\r\n                a {\r\n                    display: block;\r\n                    position: relative;\r\n                    width: 96px;\r\n                    height: 52px;\r\n                    line-height: 52px;\r\n                    color: #fff;\r\n                    text-align: center;\r\n                    font-size: 18px;\r\n                    font-family: \"Microsoft YaHei\";\r\n                    background: #e1251b;\r\n                    overflow: hidden;\r\n                    text-decoration: none;\r\n                    &hover {\r\n                        color: white !important;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=19e7cc34&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=19e7cc34&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19e7cc34\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","cartInfoList","length","staticClass","_v","_m","_l","c","key","id","attrs","domProps","isChecked","on","$event","preventDefault","checkOne","imgUrl","_s","skuName","cartPrice","changeSkuNum","skuNum","deleteOne","skuId","isAll","checkAll","apply","arguments","batchDelete","total","totalPrice","_e","staticRenderFns","name","data","computed","every","reduce","pre","item","skuPrice","methods","code","message","reqCartList","alert","cartInfo","event","checked","target","reqCheckOne","skuIdList","forEach","push","reqCheckAll","confirm","reqDeleteOne","index","findIndex","splice","idList","reqBatchDelete","filter","type","info","isLock","console","log","reqAddToCart","value","goodsNumReg","test","disNum","$forceUpdate","mounted","getCartList","component"],"sourceRoot":""}